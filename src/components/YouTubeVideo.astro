---
interface Props {
  videoId: string;
  aspectRatio?: number;
  caption?: string;
}

const { videoId, aspectRatio = 16 / 9, caption } = Astro.props;
---

<div class="flex flex-col gap-2">
  <div class="rounded-lg overflow-hidden w-full">
    <iframe
      class="w-full h-full"
      loading="lazy"
      src={"https://www.youtube.com/embed/" + videoId + "?mute=1"}
      title="YouTube video player"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      allowfullscreen></iframe>
  </div>
  {caption && (
    <figcaption class="text-center text-zinc-700">
      {caption}
    </figcaption>
  )}
</div>

<style define:vars={{ aspectRatio }}>
  div {
    aspect-ratio: var(--aspectRatio);
  }
</style>
